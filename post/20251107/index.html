<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://qingz11.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://qingz11.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://qingz11.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://qingz11.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://qingz11.github.io/css/light.css' />
    <link rel="stylesheet" href='https://qingz11.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://qingz11.github.io/css/syntax.css' />
    <title>记一次通宵修博客 - 喷射战士训练营</title>
    
    <link rel="icon" type="image/x-icon" href='/images/profile01.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    

    
    <meta name="description"
  content="本文毫无技术含量，只是因为“无知”搭进去的一个普通夜晚…" />
<meta name="keywords"
  content='blog, google analytics' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://qingz11.github.io/post/20251107/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="记一次通宵修博客 - 喷射战士训练营" />
<meta name="twitter:description"
  content="本文毫无技术含量，只是因为“无知”搭进去的一个普通夜晚…" />
<meta name="twitter:site" content="https://qingz11.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://qingz11.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="记一次通宵修博客 - 喷射战士训练营">
<meta property="og:description"
  content="本文毫无技术含量，只是因为“无知”搭进去的一个普通夜晚…" />
<meta property="og:url" content="https://qingz11.github.io/post/20251107/" />
<meta property="og:site_name" content="记一次通宵修博客" />
<meta property="og:image"
  content="https://qingz11.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-11-07 00:00:00 &#43;0000 UTC" />











      <script async src="https://www.googletagmanager.com/gtag/js?id=G-60XM8Y3EGW"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-60XM8Y3EGW');
        }
      </script>



<link rel="stylesheet" href='https://qingz11.github.io/css/custom.css'/>

</head>
<link rel="stylesheet" href="https://qingz11.github.io/css/outline-bullets.css" />


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://qingz11.github.io/">
        <img class="octicon" height="32" width="32" src="/images/avatarY.jpg">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://qingz11.github.io/">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://qingz11.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/images/avatarY.jpg">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://qingz11.github.io/">
                  <img class=" avatar-user"
                    src="/images/avatar.jpg"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://qingz11.github.io/">Steam&#39;s Blog Init</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://qingz11.github.io/post/20251107/">记一次通宵修博客</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Fri, 07 Nov 2025 00:00:00 &#43;0000"
                    class="no-wrap">
                    Fri, 07 Nov 2025 00:00:00 &#43;0000</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Mon, 10 Nov 2025 11:50:46 &#43;0800"
                    class="no-wrap">
                    Mon, 10 Nov 2025 11:50:46 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <button id="toc-toggle" onclick="clickToc()" class="btn m-0 mr-2 p-2" aria-label="Table of contents" aria-expanded="false" style="background: transparent !important; border: none; box-shadow: none;">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </button>
                    <span class="ml-2">2118 Words</span>
                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/%E6%97%A5%E8%AE%B0">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      日记
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><p>本想用“昨天真倒霉”来概述这件事，但事出真有因，不能用玄学的“倒霉”来归因这件事。总之，就是自己的“无知”导致的结果。</p>
<p>通宵，不同于熬夜，熬夜是过了凌晨十二点、一点、两点都算。但见到太阳初升，黑夜褪去，那就是通宵了。比如，今早五点半睡觉的我。</p>
<h2 id="目录串了">目录串了</h2>
<p>昨天日记写了，让 sonnet 4.5 对 pics 页面的图片进行了分组展示，以年份为单位收录当年的番茄和葱白的照片。</p>
<h3 id="原始素材没处理">原始素材没处理</h3>
<p>先前也提到了，因为没注意图片元信息是否有年份信息，以及是否有正确的年份信息。所以导致 sonnet 实现的功能，我验收怎么都不对，因为都是 2025 年份（上次批量处理图片是今年十月）。让 sonnet 写了个识别图中时间戳信息的脚本，批量处理了。</p>
<ol>
<li>第一次，成功了 900 张，脚本是完全匹配 YYYYMMDD WEK HHMMSS 格式进行信息提取，提取日期和时间作为图片的命名；</li>
<li>第二次，成功了 1,300 张，脚本被优化了，忽略中间的三个星期缩写字符串，只提前左侧的 8 个字符，和右侧的 6 个字符；</li>
<li>第三次，成功了 800 张，正则匹配的逻辑又修正了，以解决 OCR 识别时，左侧的日期被识别到了右侧，右侧的时间识别成了左侧的日期，即解决了倒序问题；</li>
<li>第四次，成功了 400 张，还是正则逻辑的修改，以解决原始时间戳被镜像识别的问题；</li>
</ol>
<p>最后剩下了大概近 1,000 张的无法识别。本想识别效果好的话，可以将这个脚本丢去 GitHub 开源了。但最后验收了下，机器处理的 3,400 张大概有 5、600 张的识别错误。人工修复了图片命名。而无法识别的 1,000 张，还剩下大概 6、700 张需要我再重新命名。</p>
<h3 id="sonnet-偷偷换位了">sonnet 偷偷换位了</h3>
<p>不知道什么时候，sonnet 跑到了我另外一个开着的 hugo 窗口工作，这个 gs0 项目是之前实现 Pics 页面功能的初稿，只有 Pics 页面的逻辑，以及博客样式的定制化。站点的其他功能，例如，为了方便存储网站图片，在 images 文件夹下建的 post 文件夹，这个项目是没有的。</p>
<p>等发现，我主站点丢失了 post 文件夹，让 sonnet 回滚，已经不知道咋回滚了。它试图搜了很多次本地的 commit 提交记录，都没找到我在昨天下午 1 点 42 提交的 <code>b7e4aa4</code>。</p>
<p>所以，问题就变成了先修复站点，还原 QingZ11.github.io 项目目录结构。</p>
<p>从 20 点开始到 22 点，sonnet 尝试了各种姿势来恢复项目。GitHub 提交记录是没有的，Time Machine 是没开启的，本地快照不存在的。那刻的我，十分崩溃，连葱白喊我，都少见地凶了她。正面临数据丢失，或者数据能找回，但是要花费大量时间的时候，心情很沉重。甚至有片刻想，算了，这个博客就停更于 20251106 吧。</p>
<h2 id="备份">备份</h2>
<p>想了下，现在的问题是：</p>
<ol>
<li>post 图片丢失了；</li>
<li>整个项目回滚（也滚不了），Pics 的逻辑会丢失</li>
</ol>
<p>第一个问题，在发现项目丢失 post 的时候，sonnet 尝试回滚到了最新（四月份）的 commit，里面有 post 文件夹，和图片展示逻辑。这个回滚的版本被我拷贝到了本地，当作备份；第二个问题，感谢自己“到处拉屎”，建了 gs0 这个项目单独修改站点主题 github-style 的定制化功能开发，所以 Pics 的逻辑，gs0 是有的。我只要拷贝对应的文件夹到 QingZ11.github.io。至于，后面不在 gs0 修改，在主站点实现的 Pics 页面优化工作可以反推线上的页面逻辑，在本地的主题文件夹下进行对应文件修改——这个方法是问了 sonnet，它表示可行。就开始了 1、2 问题的修复。</p>
<p>等所有问题都修复了，大概是一点的样子。那时候脑子还挺清醒的，一点都不困，也没打哈欠，就继续在恢复了主站点的前提下，开始昨天下午的 Pics 页面的图片分组实现。</p>
<h2 id="验收上线">验收，上线</h2>
<p>可能是深夜网速畅通，sonent 很快就写好了功能，我又提了点小的优化需求。就那么在本地验收通过了，开始往远端 push</p>
<pre tabindex="0"><code>env HUGO_ENV=&#34;production&#34; hugo -t github-style
</code></pre><p>起，先把站点构建起来。站点构建信息输出了，切到 public 目录，去把更新 push 上去，报错 <code>fatal: in unpopulated submodule 'myBlog/public'</code></p>
<p>开始按照 Gemini 的方法，让 Git “忘了 public 是个子模块这回事吧，它只是个普通文件夹。”</p>
<pre tabindex="0"><code># “反初始化” (de-register) 这个坏掉的子模块
git submodule deinit -f public

# 告诉 Git 停止跟踪 (track) public 文件夹
git rm --cached public

# (可选，但推荐) 清理 Git 内部的残留：
rm -rf .git/modules/public
</code></pre><p>一顿操作下来，终于可以三键 push 了（<code>git add</code>，<code>git commit</code>，<code>git push</code>）往上推。但发现，这次 push 不是把 public 目录往远端根目录推，而是整个本地的 QingZ11.github.io 推了上去。自然是部署失败的。</p>
<h2 id="忘记-git-初始化">忘记 git 初始化</h2>
<p>在解决 <code>fatal: in unpopulated submodule 'myBlog/public'</code> 的时候，感觉 git 环境太复杂了，又起了个项目，把远端的项目拉了下来（感谢无所事事的自己）。</p>
<p>如何只提交某个文件夹的东西到远端的根目录，Gemini 来来回回的回答都不能解决问题，所以转去 VS Code 窗口让 sonnet 干。结果一下子就解决了这个问题，在 public 文件夹下做 git 初始化就好了。啊，是初始化啊！这个操作在去年执行之后，项目一直很稳定就没操作过了。</p>
<p>初始化，提交变更，提交太大，分批提交。提交成功，Action 部署。部署成功，验收。</p>
<p>post 文件夹的图少了一半，想来是备份的时候，备份的是四月的 post。这时候就用到了之前无所事事拉取下来的远端项目，post 的内容是完整的，是昨天下午 1 点 42 分提交变更多的。补全，再提交。验收，原来的内容恢复了，Pics 页面逻辑也正确了。</p>
<p>todolist</p>
<ol>
<li>个人主页的 GitHub、Twitter logo 不对 <code>11.07 done</code></li>
<li>Pics 页面的图片显示逻辑得优化，懒加载似乎没生效，等 12 月再修，这个月的 sonnet 额度快超标了</li>
</ol>
<h2 id="账单">账单</h2>
<ol>
<li>sonnet 打工实现功能，再自我修复问题，$ 5.49</li>
<li>GitHub Action 超额 $ 1.05</li>
</ol>
<p>这个项目图片站了快 3 个 G，Action 工作的确挺辛苦的，免费的 <code>2,000 Actions minutes/month</code> 超标也很正常。但才月初啊，就超标了。。省点用。</p>
<p>以上，我下次一定做功能开分支，搞功能之前先备份。</p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  
  <div id="gh-outline" class="gh-outline">
    <div class="gh-outline-header">
      <div class="gh-outline-title-container">
        <h2 class="gh-outline-title">Contents</h2>
        <button id="close-outline" class="gh-outline-close">
          <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-x">
            <path fill-rule="evenodd" d="M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z"></path>
          </svg>
        </button>
      </div>
    </div>
    <div class="gh-outline-content">
      <nav id="gh-outline-content" class="gh-outline-content-nav">
        
      </nav>
    </div>
  </div>
</div>

<link rel="stylesheet" href='https://qingz11.github.io/css/toc.css' />
<script type="application/javascript" src='https://qingz11.github.io/js/toc.js'></script>
<script src="https://qingz11.github.io/js/fix-toc.js"></script>

  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://qingz11.github.io/css/gitalk.css'>
<script src='https://qingz11.github.io/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'Ov23liSQNAUdsFkma8t1',
    clientSecret: 'af21793c069b3de15117b89281ea03d469147efc',
    repo: 'QingZ11.github.io',
    owner: 'QingZ11',
    admin: ['QingZ11'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://qingz11.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>

</body>

<script type="application/javascript" src="https://qingz11.github.io/js/github-style.js"></script>







</html>